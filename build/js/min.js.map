{"version":3,"sources":["../../src/js/class-cache.js","../../src/js/class-ceelo.js","../../src/js/class-sw-helper.js","../../src/js/master.js"],"names":[],"mappings":"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","file":"min.js","sourcesContent":["class CACHE {\n  constructor() {\n    this.cacheVersion = \"v1\";\n    this.cached  = false;\n    this.installButton = \"\";\n    this.installClass = \"cache-status__install--true\";\n    this.installText = \"Cached\";\n    this.uninstallClass = \"cache-status__install--false\";\n    this.uninstallText = \"Uncached\";\n  }\n  check () {\n    // Check against cache first\n    let checkCache = caches.match('/');\n    let resolved = response => {\n      if (response) {\n        this.installButton.classList.add(this.installClass);\n        this.installButton.textContent = this.installText;\n        this.cached = true;\n      } else {  \n        this.installButton.classList.add(this.uninstallClass);\n        this.installButton.textContent = this.uninstallText;\n        this.cached = false;\n      }\n    }\n    let rejected = reason => {\n      console.log('Cache promise error: '+reason);\n    }\n    checkCache.then(resolved, rejected);\n  }\n  install() {\n    const filesToCache = ['/'];\n    let openCache = caches.open(this.cacheVersion);\n    let resolved = cache => {\n      cache.addAll(filesToCache).then(location.reload());\n    }\n    let rejected = reason => console.log('Cache open error: '+reason);\n    openCache.then(resolved, rejected);\n  }\n  delete() {\n    let openCache = caches.open(this.cacheVersion);\n    let deleteCache = cache => {\n      let getCacheKeys = cache.keys();\n      let deleteKey = key => cache.delete(key);\n      let deleteKeys = keys => keys.forEach(deleteKey);\n      getCacheKeys.then(deleteKeys);\n      location.reload();\n    }\n    openCache.then(deleteCache);\n  }\n  clean() {\n    const cacheWhitelist = [cacheVersion];\n    let getCacheKeys = cache.keys();\n    let deleteKey = key => {\n      if (cacheWhitelist.indexOf(key) === -1) {\n        console.log(\"SW: Deleting old cache\");\n        return caches.delete(key);\n      }\n    }\n    let deleteKeys = keylist => {\n      return Promise.all(keyList.map(deleteKey));\n    }\n    getCacheKeys.then(deleteKeys);\n  }\n\n} // End class\n","class CEELO {\r\n  constructor(){\r\n    this.rollResults     = \"\";\r\n    this.matches         = \"\";\r\n    this.potentialPoints = \"\";\r\n    this.dice            = \"\";\r\n    this.setPoint        = \"\";\r\n    this.roll            = \"\";\r\n    this.allDice         = \"\";\r\n  }\r\n  createDice (amount = 3) {\r\n    // Load placeholder dice into DOM\r\n    for (let index = 0; index < amount; index++) {\r\n      const dieDiv = document.createElement(\"div\"); \r\n      dieDiv.classList.add(\"dice__die\");\r\n      dieDiv.classList.add(\"dice__die-\"+(index+1)); // dice_die-1, etc\r\n      const placeholderContent = document.createTextNode(\"6\");\r\n      dieDiv.appendChild(placeholderContent); \r\n      this.dice.appendChild(dieDiv);\r\n    }\r\n  }\r\n  rollDice() {\r\n    console.log(\"rolling dice\");\r\n    // Roll each die and put the results into an array\r\n    let rollResults = [];\r\n    function roll(die) {\r\n      const rollResult = Math.floor((Math.random() * 6) + 1);\r\n      die.textContent = rollResult;\r\n      // push each result to an array\r\n      rollResults.push(rollResult);\r\n    }\r\n    Array.prototype.forEach.call(this.allDice, roll);\r\n    return rollResults;\r\n  }\r\n  findMatches() {\r\n    // Sort results so matches will be adjacent\r\n    let sortedRolls = this.rollResults.slice().sort();\r\n    \r\n    // Clone results into an array of potential set points\r\n    this.potentialPoints = sortedRolls.slice();\r\n    \r\n    // Find matches by comparing each result\r\n    let matches = [];\r\n    for (let i = 0; i < this.rollResults.length-1; i++) {\r\n      if (sortedRolls[i] == sortedRolls[i+1]) {\r\n        // count each match by pushing it to the matches array\r\n        matches.push(sortedRolls[i]);\r\n        // exclude the match from potential set points\r\n        this.potentialPoints.splice(i, 2);\r\n      }\r\n    }\r\n    return matches;\r\n  }\r\n  determineResults() {\r\n    // Results from checking for matches\r\n    const rolledDoubles = this.matches[0];\r\n    const rolledTriples = this.matches[1];\r\n    if (rolledTriples) {\r\n      //alert(\"You Win!\")\r\n      this.dice.classList.add(\"dice--win\");\r\n    }\r\n    else if (rolledDoubles) {\r\n      // the single will be the remaining potential point\r\n      const single = this.potentialPoints[0];\r\n      this.dice.classList.add(\"dice--pair\");\r\n      this.dice.classList.remove(\"dice--win\")\r\n      return single;\r\n    } else {\r\n      this.dice.classList.remove([\"dice--pair\"],[\"dice--win\"]);\r\n      const pointMax = Math.max.apply(null, this.rollResults);\r\n      return pointMax;\r\n    }\r\n  }\r\n} // End class CEELO\r\n","class SW_HELPER {\n  constructor() {\n    this.path = '/sw.js';\n    this.scope = '/';\n    this.registered = false;\n    this.sw = navigator.serviceWorker;\n    this.wrap = \"\";\n    this.registerButton = \"\";\n  }\n  checkRegistration() {\n    // Setup\n    let regStatus = this.sw.getRegistration();\n    let regResolved = registration => {\n      if (registration) {\n        console.log(\"Service Worker registered\");\n        this.registerButton.classList.add(\"sw-status__registered--true\");\n        this.registerButton.textContent = \"Registered\";\n        this.registered = true;\n      } else {\n        console.log(\"Service Worker not registered\");\n        this.registerButton.classList.add(\"sw-status__registered--false\");\n        this.registerButton.textContent = \"Unregistered\";\n        this.registered = false;\n      }\n    }\n    let regRejected = reason => console.log('Registration rejected: '+reason);\n    // Actions\n    regStatus.then(regResolved,regRejected);\n  }\n  checkControl() {\n    if (this.sw.controller) {\n      this.wrap.classList.add(\"sw-controlled\");\n    }\n  }\n  register(unregister) {\n    let registration = this.sw.register(this.path, {scope: this.scope});\n    let regResolved = registration => {\n      if (unregister) registration.unregister();\n      location.reload();\n    }\n    let regRejected = reason => console.log('Registration rejected: '+reason);\n    registration.then(regResolved,regRejected);\n  }\n  unregister() {\n    this.register(\"unregister\");\n  }\n\n} // End class\n","// Instantiate classes\r\nlet SWH   = new SW_HELPER;\r\nlet Cache = new CACHE;\r\nlet Ceelo = new CEELO;\r\n\r\n// Once DOM has loaded\r\ndocument.addEventListener(\"DOMContentLoaded\", function(){\r\n\r\n  // If browser supports service workers\r\n  if ('serviceWorker' in navigator) {\r\n    swButtonActions();\r\n    cacheButtonActions();\r\n  } \r\n  else showSupportWarnings();\r\n\r\n  // Add Cee-Lo game\r\n  ceeLo();\r\n\r\n}); // end DOMContentLoaded\r\n\r\nfunction swButtonActions() {\r\n  // Setup\r\n  SWH.wrap = document.querySelector(\".wrap\");\r\n  SWH.registerButton = document.querySelector(\".sw-status__register-button\");\r\n  SWH.checkRegistration();\r\n  SWH.checkControl();\r\n  function clickEvent() {\r\n    if (!SWH.registered) SWH.register();\r\n    else SWH.unregister();\r\n  }\r\n  SWH.registerButton.addEventListener('click', clickEvent);\r\n}\r\nfunction cacheButtonActions() {\r\n  // Setup\r\n  let cacheButtonClass = \".cache-status__install-button\";\r\n  Cache.installButton = document.querySelector(cacheButtonClass);\r\n  Cache.check();\r\n  let clickEvent = function(){\r\n    if (!Cache.cached) Cache.install();\r\n    else Cache.delete(); \r\n  }\r\n  // Actions\r\n  Cache.installButton.addEventListener('click', clickEvent);\r\n}\r\nfunction showSupportWarnings() {\r\n  //alert(\"Service Workers not supported!\");\r\n  let warningElement     = document.querySelector(\".sw-warning\");\r\n  let swStatusElement    = document.querySelector(\".sw-status\");\r\n  let cacheStatusElement = document.querySelector(\".cache-status\");\r\n  warningElement.classList.add(\"sw-warning--triggered\");\r\n  swStatusElement.classList.add(\"sw-unsupported\");\r\n  cacheStatusElement.classList.add(\"cache-unsupported\");\r\n}\r\nfunction ceeLo() {\r\n  // Setup\r\n  Ceelo.setPoint = document.querySelector(\".set-point\");\r\n  Ceelo.dice     = document.querySelector(\".dice\");\r\n  Ceelo.roll     = document.querySelector(\".roll\");\r\n\r\n  Ceelo.createDice();\r\n\r\n  Ceelo.allDice  = document.getElementsByClassName(\"dice__die\");\r\n\r\n  function rollDice() {\r\n    Ceelo.rollResults          = Ceelo.rollDice();\r\n    Ceelo.matches              = Ceelo.findMatches();\r\n    Ceelo.setPoint.textContent = Ceelo.determineResults();\r\n  }\r\n\r\n  // Roll dice when button is clicked \r\n  Ceelo.roll.addEventListener('click', rollDice);\r\n}"]}