"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var CACHE=function(){function a(){_classCallCheck(this,a),this.currentCache="v1",this.cached=!1,this.install_button=""}return _createClass(a,[{key:"check",value:function check(){caches.match("/").then(function(b){b?(Cache.install_button.classList.add("cache-status__install--true"),Cache.install_button.textContent="Cached",Cache.cached=!0):(Cache.install_button.classList.add("cache-status__install--false"),Cache.install_button.textContent="Uncached",Cache.cached=!1)})}},{key:"install",value:function install(){var b=["/"];caches.open(Cache.currentCache).then(function(c){c.addAll(b).then(function(){location.reload()})})}},{key:"delete",value:function _delete(){caches.open(Cache.currentCache).then(function(b){b.delete("/").then(function(){location.reload()})}).catch(function(b){console.log("Cache delete failed"+b)})}},{key:"clean",value:function clean(){var b=[currentCache];caches.keys().then(function(c){return Promise.all(c.map(function(d){if(-1===b.indexOf(d))return caches.delete(d)}))})}},{key:"fetch",value:function(b){function c(){return b.apply(this,arguments)}return c.toString=function(){return b.toString()},c}(function(){event.respondWith(caches.match(event.request).then(function(b){return b&&console.log("SW: Resource loaded from cache"),b||fetch(event.request).then(function(c){return console.log("SW: Requested resource not yet cached, caching now"),caches.open(currentCache).then(function(d){return d.put(event.request,c.clone()),c})})}))})}]),a}();
"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var CEELO=function(){function a(){_classCallCheck(this,a),this.rollResults="",this.matches="",this.potentialPoints="",this.dice="",this.setPoint="",this.roll="",this.allDice=""}return _createClass(a,[{key:"createDice",value:function createDice(){for(var d,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,c=0;c<b;c++){d=document.createElement("div"),d.classList.add("dice__die"),d.classList.add("dice__die-"+(c+1));var e=document.createTextNode("6");d.appendChild(e),CL.dice.appendChild(d)}}},{key:"rollDice",value:function rollDice(){console.log("rolling dice");var b=[];return Array.prototype.forEach.call(CL.allDice,function(c){var d=Math.floor(6*Math.random()+1);c.textContent=d,b.push(d)}),b}},{key:"findMatches",value:function findMatches(){var b=CL.rollResults.slice().sort();CL.potentialPoints=b.slice();for(var c=[],d=0;d<CL.rollResults.length-1;d++)b[d]==b[d+1]&&(c.push(b[d]),CL.potentialPoints.splice(d,2));return c}},{key:"determineResults",value:function determineResults(){var b=CL.matches[0],c=CL.matches[1];if(c)CL.dice.classList.add("dice--win");else{if(b){var d=CL.potentialPoints[0];return CL.dice.classList.add("dice--pair"),CL.dice.classList.remove("dice--win"),d}CL.dice.classList.remove(["dice--pair"],["dice--win"]);var d=Math.max.apply(null,CL.rollResults);return d}}}]),a}();
'use strict';var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var SERVICEWORKER=function(){function a(){_classCallCheck(this,a),this.path='/sw.js',this.scope='/',this.registered=!1,this.register_button=''}return _createClass(a,[{key:'checkRegistration',value:function checkRegistration(){navigator.serviceWorker.getRegistration().then(function(b){b?(SW.register_button.classList.add('sw-status__registered--true'),SW.register_button.textContent='Registered',SW.registered=!0):(SW.register_button.classList.add('sw-status__registered--false'),SW.register_button.textContent='Unregistered',SW.registered=!1)}).catch(function(b){console.log('Check registration promise error: '+b)})}},{key:'checkControl',value:function checkControl(){navigator.serviceWorker.controller&&document.querySelector('body').classList.add('sw-controlled')}},{key:'register',value:function register(){navigator.serviceWorker.register(SW.path,{scope:SW.scope}).then(function(){location.reload()}).catch(function(b){console.log('Registration failed with '+b)})}},{key:'unregister',value:function unregister(){navigator.serviceWorker.register(SW.path,{scope:SW.scope}).then(function(b){b.unregister().then(function(){location.reload()})}).catch(function(b){console.log('Registration failed with '+b)})}}]),a}();
"use strict";var SW=new SERVICEWORKER,Cache=new CACHE,CL=new CEELO;document.addEventListener("DOMContentLoaded",function(){"serviceWorker"in navigator?(SW.register_button=document.querySelector(".sw-status__register-button"),SW.checkRegistration(),SW.checkControl(),SW.register_button.addEventListener("click",function(){SW.registered?SW.unregister():SW.register()},!1)):alert("Service Workers not supported!"),Cache.install_button=document.querySelector(".cache-status__install-button"),Cache.check(),Cache.install_button.addEventListener("click",function(){Cache.cached?Cache.delete():Cache.install()},!1),CL.setPoint=document.querySelector(".set-point"),CL.dice=document.querySelector(".dice"),CL.roll=document.querySelector(".roll"),CL.createDice(),CL.allDice=document.getElementsByClassName("dice__die"),CL.roll.addEventListener("click",function(){CL.rollResults=CL.rollDice(),CL.matches=CL.findMatches(),CL.setPoint.textContent=CL.determineResults()},!1)});
