"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var CACHE=function(){function a(){_classCallCheck(this,a),this.cacheVersion="v1",this.cached=!1,this.installButton="",this.installClass="cache-status__install--true",this.installText="Cached",this.uninstallClass="cache-status__install--false",this.uninstallText="Uncached"}return _createClass(a,[{key:"check",value:function check(){var b=this,c=caches.match("/");c.then(function resolved(f){f?(b.installButton.classList.add(b.installClass),b.installButton.textContent=b.installText,b.cached=!0):(b.installButton.classList.add(b.uninstallClass),b.installButton.textContent=b.uninstallText,b.cached=!1)},function rejected(f){console.log("Cache promise error: "+f)})}},{key:"install",value:function install(){var b=["/"],c=caches.open(this.cacheVersion);c.then(function resolved(f){f.addAll(b).then(location.reload())},function rejected(f){return console.log("Cache open error: "+f)})}},{key:"delete",value:function _delete(){var b=caches.open(this.cacheVersion);b.then(function deleteCache(d){var e=d.keys(),f=function deleteKey(h){return d.delete(h)};e.then(function deleteKeys(h){return h.forEach(f)}),location.reload()})}},{key:"clean",value:function clean(){var b=[cacheVersion],c=cache.keys(),d=function deleteKey(f){if(-1===b.indexOf(f))return console.log("SW: Deleting old cache"),caches.delete(f)};c.then(function deleteKeys(){return Promise.all(keyList.map(d))})}}]),a}();
"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var CEELO=function(){function a(){_classCallCheck(this,a),this.rollResults="",this.matches="",this.potentialPoints="",this.dice="",this.setPoint="",this.roll="",this.allDice=""}return _createClass(a,[{key:"createDice",value:function createDice(){for(var d,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,c=0;c<b;c++){d=document.createElement("div"),d.classList.add("dice__die"),d.classList.add("dice__die-"+(c+1));var e=document.createTextNode("6");d.appendChild(e),this.dice.appendChild(d)}}},{key:"rollDice",value:function rollDice(){console.log("rolling dice");var c=[];return Array.prototype.forEach.call(this.allDice,function(d){var e=Math.floor(6*Math.random()+1);d.textContent=e,c.push(e)}),c}},{key:"findMatches",value:function findMatches(){var b=this.rollResults.slice().sort();this.potentialPoints=b.slice();for(var c=[],d=0;d<this.rollResults.length-1;d++)b[d]==b[d+1]&&(c.push(b[d]),this.potentialPoints.splice(d,2));return c}},{key:"determineResults",value:function determineResults(){var b=this.matches[0],c=this.matches[1];if(c)this.dice.classList.add("dice--win");else{if(b){var d=this.potentialPoints[0];return this.dice.classList.add("dice--pair"),this.dice.classList.remove("dice--win"),d}this.dice.classList.remove(["dice--pair"],["dice--win"]);var d=Math.max.apply(null,this.rollResults);return d}}}]),a}();
'use strict';var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var SW_HELPER=function(){function a(){_classCallCheck(this,a),this.path='/sw.js',this.scope='/',this.registered=!1,this.sw=navigator.serviceWorker,this.wrap='',this.registerButton=''}return _createClass(a,[{key:'checkRegistration',value:function checkRegistration(){var b=this,c=this.sw.getRegistration();c.then(function regResolved(f){f?(console.log('Service Worker registered'),b.registerButton.classList.add('sw-status__registered--true'),b.registerButton.textContent='Registered',b.registered=!0):(console.log('Service Worker not registered'),b.registerButton.classList.add('sw-status__registered--false'),b.registerButton.textContent='Unregistered',b.registered=!1)},function regRejected(f){return console.log('Registration rejected: '+f)})}},{key:'checkControl',value:function checkControl(){this.sw.controller&&this.wrap.classList.add('sw-controlled')}},{key:'register',value:function register(b){var c=this.sw.register(this.path,{scope:this.scope});c.then(function regResolved(f){b&&f.unregister(),location.reload()},function regRejected(f){return console.log('Registration rejected: '+f)})}},{key:'unregister',value:function unregister(){this.register('unregister')}}]),a}();
"use strict";var SWH=new SW_HELPER,Cache=new CACHE,Ceelo=new CEELO;function swButtonActions(){SWH.wrap=document.querySelector(".wrap"),SWH.registerButton=document.querySelector(".sw-status__register-button"),SWH.checkRegistration(),SWH.checkControl(),SWH.registerButton.addEventListener("click",function(){SWH.registered?SWH.unregister():SWH.register()})}function cacheButtonActions(){Cache.installButton=document.querySelector(".cache-status__install-button"),Cache.check();Cache.installButton.addEventListener("click",function clickEvent(){Cache.cached?Cache.delete():Cache.install()})}function showSupportWarnings(){var a=document.querySelector(".sw-warning"),b=document.querySelector(".sw-status"),c=document.querySelector(".cache-status");a.classList.add("sw-warning--triggered"),b.classList.add("sw-unsupported"),c.classList.add("cache-unsupported")}function ceeLo(){Ceelo.setPoint=document.querySelector(".set-point"),Ceelo.dice=document.querySelector(".dice"),Ceelo.roll=document.querySelector(".roll"),Ceelo.createDice(),Ceelo.allDice=document.getElementsByClassName("dice__die"),Ceelo.roll.addEventListener("click",function(){Ceelo.rollResults=Ceelo.rollDice(),Ceelo.matches=Ceelo.findMatches(),Ceelo.setPoint.textContent=Ceelo.determineResults()})}document.addEventListener("DOMContentLoaded",function(){"serviceWorker"in navigator?(swButtonActions(),cacheButtonActions()):showSupportWarnings(),ceeLo()});
