"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var CACHE=function(){function a(){_classCallCheck(this,a),this.cacheVersion="v1",this.cached=!1,this.install_button=""}return _createClass(a,[{key:"check",value:function check(){caches.match("/").then(function(b){b?(Cache.install_button.classList.add("cache-status__install--true"),Cache.install_button.textContent="Cached",Cache.cached=!0):(Cache.install_button.classList.add("cache-status__install--false"),Cache.install_button.textContent="Uncached",Cache.cached=!1)})}},{key:"install",value:function install(){var b=["/"];caches.open(Cache.cacheVersion).then(function(c){c.addAll(b).then(function(){location.reload()})})}},{key:"delete",value:function _delete(){caches.open(Cache.cacheVersion).then(function(b){b.keys().then(function(c){c.forEach(function(d){b.delete(d)})}),location.reload()})}},{key:"clean",value:function clean(){var b=[cacheVersion];caches.keys().then(function(c){return Promise.all(c.map(function(d){if(-1===b.indexOf(d))return caches.delete(d)}))})}}]),a}();
"use strict";var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var CEELO=function(){function a(){_classCallCheck(this,a),this.rollResults="",this.matches="",this.potentialPoints="",this.dice="",this.setPoint="",this.roll="",this.allDice=""}return _createClass(a,[{key:"createDice",value:function createDice(){for(var d,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,c=0;c<b;c++){d=document.createElement("div"),d.classList.add("dice__die"),d.classList.add("dice__die-"+(c+1));var e=document.createTextNode("6");d.appendChild(e),Ceelo.dice.appendChild(d)}}},{key:"rollDice",value:function rollDice(){console.log("rolling dice");var b=[];return Array.prototype.forEach.call(Ceelo.allDice,function(c){var d=Math.floor(6*Math.random()+1);c.textContent=d,b.push(d)}),b}},{key:"findMatches",value:function findMatches(){var b=Ceelo.rollResults.slice().sort();Ceelo.potentialPoints=b.slice();for(var c=[],d=0;d<Ceelo.rollResults.length-1;d++)b[d]==b[d+1]&&(c.push(b[d]),Ceelo.potentialPoints.splice(d,2));return c}},{key:"determineResults",value:function determineResults(){var b=Ceelo.matches[0],c=Ceelo.matches[1];if(c)Ceelo.dice.classList.add("dice--win");else{if(b){var d=Ceelo.potentialPoints[0];return Ceelo.dice.classList.add("dice--pair"),Ceelo.dice.classList.remove("dice--win"),d}Ceelo.dice.classList.remove(["dice--pair"],["dice--win"]);var d=Math.max.apply(null,Ceelo.rollResults);return d}}}]),a}();
'use strict';var _createClass=function(){function a(b,c){for(var e,d=0;d<c.length;d++)e=c[d],e.enumerable=e.enumerable||!1,e.configurable=!0,'value'in e&&(e.writable=!0),Object.defineProperty(b,e.key,e)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}var SW_HELPER=function(){function a(){_classCallCheck(this,a),this.path='/sw.js',this.scope='/',this.registered=!1,this.sw=navigator.serviceWorker,this.wrap='',this.register_button=''}return _createClass(a,[{key:'isRegistered',value:function isRegistered(){console.log('Service Worker registered'),SWH.register_button.classList.add('sw-status__registered--true'),SWH.register_button.textContent='Registered',SWH.registered=!0}},{key:'isNotRegistered',value:function isNotRegistered(){console.log('Service Worker not registered'),SWH.register_button.classList.add('sw-status__registered--false'),SWH.register_button.textContent='Unregistered',SWH.registered=!1}},{key:'checkRegistration',value:function checkRegistration(){var b=this,c=this.sw.getRegistration();c.then(function statusResolved(f){f?b.isRegistered():b.isNotRegistered()},function statusError(f){console.log('Check registration promise error: '+f)})}},{key:'checkControl',value:function checkControl(){this.sw.controller&&this.wrap.classList.add('sw-controlled')}},{key:'register',value:function register(b){var c=this.sw.register(this.path,{scope:this.scope});c.then(function registrationResolved(f){b&&f.unregister(),location.reload()},function registrationError(f){console.log('Registration failed with: '+f)})}},{key:'unregister',value:function unregister(){this.register('unregister')}}]),a}();
"use strict";var SWH=new SW_HELPER,Cache=new CACHE,Ceelo=new CEELO;document.addEventListener("DOMContentLoaded",function(){"serviceWorker"in navigator?(SWH.wrap=document.querySelector(".wrap"),SWH.register_button=document.querySelector(".sw-status__register-button"),SWH.checkRegistration(),SWH.checkControl(),SWH.register_button.addEventListener("click",function(){SWH.registered?SWH.unregister():SWH.register()},!1),Cache.install_button=document.querySelector(".cache-status__install-button"),Cache.check(),Cache.install_button.addEventListener("click",function(){Cache.cached?Cache.delete():Cache.install()},!1)):(document.querySelector(".sw-warning").classList.add("sw-warning--triggered"),document.querySelector(".sw-status").classList.add("sw-unsupported"),document.querySelector(".cache-status").classList.add("sw-unsupported")),Ceelo.setPoint=document.querySelector(".set-point"),Ceelo.dice=document.querySelector(".dice"),Ceelo.roll=document.querySelector(".roll"),Ceelo.createDice(),Ceelo.allDice=document.getElementsByClassName("dice__die"),Ceelo.roll.addEventListener("click",function(){Ceelo.rollResults=Ceelo.rollDice(),Ceelo.matches=Ceelo.findMatches(),Ceelo.setPoint.textContent=Ceelo.determineResults()},!1)});
