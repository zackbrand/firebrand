const currentCache="v1";this.addEventListener("install",function(event){console.log("SW: 'install' event fired");event.waitUntil(initialCache())});this.addEventListener("activate",function(event){console.log("SW: 'activate' event fired");event.waitUntil(cleanCache())});this.addEventListener("fetch",function(event){console.log("SW: 'fetch' event fired");event.respondWith(caches.match(event.request).then(function(resp){if(resp)console.log("SW: Resource loaded from cache");return resp||fetch(event.request).then(function(response){console.log("SW: Requested resource not yet cached, caching now");return caches.open(currentCache).then(function(cache){cache.put(event.request,response.clone());return response})})}))});function initialCache(){const filesToCache=["/"];caches.open(currentCache).then(function(cache){console.log("SW: Installing initial cache");return cache.addAll(filesToCache)})}function cleanCache(){const cacheWhitelist=[currentCache];caches.keys().then(function(keyList){return Promise.all(keyList.map(function(key){if(cacheWhitelist.indexOf(key)===-1){console.log("SW: Deleting old cache");return caches.delete(key)}}))})}