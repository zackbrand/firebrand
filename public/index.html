<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <title>Welcome to Firebrand</title> <link rel="shortcut icon" type="image/x-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAlUlEQVR42rXSwQmAMBQD0I7SkbpRV+gcHchzT47Qq0pAY0o/n4IKwUvzLMGQQzjuXE9I17sO6QjPvINC5gFEyh8CRH4BqgLMEqAFIh4wfj0pwsyAjALLAARZAGKMzzW3vY8I3mm6gQIIYYZlG0Cc9X2glOKsb48IoLXG29hlAlmWByJhwQSIVAVkxCnQUdR0RP4NEzoBfBT42XTc3E4AAAAASUVORK5CYII="> <style>.noscript,.sw-warning h1{text-align:center;color:#652323;background:#f1f39b;margin:0;padding:5px}.sw-warning{display:none}.sw-warning--triggered{display:block}.sw-unsupported{opacity:0.3}body{font-family:Roboto,Arial,sans-serif;background:#ECEFF1 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAGUlEQVR42mI4c+bMfyBgYAQRZ8+e/Q8QYAB1SAzF+qrpogAAAABJRU5ErkJggg==");color:rgba(0,0,0,0.87);margin:0;box-sizing:border-box}body.sw-controlled{border-color:green}a{color:#039be5}.wrap{border-top:5px solid #e50303}.message{width:300px;max-width:80%;margin:40px auto;box-shadow:0 1px 3px 0 rgba(0,0,0,0.2),0 1px 1px 0 rgba(0,0,0,0.14),0 2px 1px -1px rgba(0,0,0,0.12);border-radius:2px;background:white;padding:16px 24px;text-align:center}.message h1{font-size:22px;font-weight:500;text-align:center;margin:0 0 16px}.message p{font-weight:300;line-height:150%}.message ul{list-style:none;margin:16px 0 0;padding:0;text-align:center}.message li button{padding:8px;text-transform:uppercase;background:#e50303;color:white;border:1px solid #039be5;border-radius:3px;box-shadow:0 2px 5px 0 rgba(0,0,0,0.26);min-width:120px;overflow:hidden}.message .button{cursor:pointer}.message .cache-status__install--false,.message .sw-status__registered--false{background:#e50303}.message .cache-status__install--true,.message .sw-status__registered--true{background:green}body{font-family:sans-serif}.dice{border:2px dashed #ab9d9d;padding:5px;border-radius:2px;display:inline-block;margin:0 0 5px}.dice--pair{background-color:red}.dice--win{background-color:blue}.dice__die{display:inline-block;background:silver;margin:0 5px 5px 0;padding:5px;width:15px;font-weight:bold;border-radius:5px;text-align:center}.dice__die:last-child{margin-right:0}.roll{display:inline-block;margin:0 0 5px 0;padding:5px;text-decoration:none;color:white;background:#e50303;border-radius:2px}</style> <script>"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n,c=0;c<t.length;c++)n=t[c],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,c){return n&&e(t.prototype,n),c&&e(t,c),t}}(),CACHE=function(){function e(){_classCallCheck(this,e),this.cacheVersion="v1",this.cached=!1,this.install_button=""}return _createClass(e,[{key:"check",value:function(){caches.match("/").then(function(e){e?(Cache.install_button.classList.add("cache-status__install--true"),Cache.install_button.textContent="Cached",Cache.cached=!0):(Cache.install_button.classList.add("cache-status__install--false"),Cache.install_button.textContent="Uncached",Cache.cached=!1)})}},{key:"install",value:function(){var e=["/"];caches.open(Cache.cacheVersion).then(function(t){t.addAll(e).then(function(){location.reload()})})}},{key:"delete",value:function(){caches.open(Cache.cacheVersion).then(function(e){e.keys().then(function(t){t.forEach(function(t){e.delete(t)})}),location.reload()})}},{key:"clean",value:function(){var e=[cacheVersion];caches.keys().then(function(t){return Promise.all(t.map(function(t){if(-1===e.indexOf(t))return caches.delete(t)}))})}}]),e}(),_createClass=function(){function e(e,t){for(var n,c=0;c<t.length;c++)n=t[c],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,c){return n&&e(t.prototype,n),c&&e(t,c),t}}(),CEELO=function(){function e(){_classCallCheck(this,e),this.rollResults="",this.matches="",this.potentialPoints="",this.dice="",this.setPoint="",this.roll="",this.allDice=""}return _createClass(e,[{key:"createDice",value:function(){for(var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3,n=0;n<t;n++){e=document.createElement("div"),e.classList.add("dice__die"),e.classList.add("dice__die-"+(n+1));var c=document.createTextNode("6");e.appendChild(c),Ceelo.dice.appendChild(e)}}},{key:"rollDice",value:function(){console.log("rolling dice");var e=[];return Array.prototype.forEach.call(Ceelo.allDice,function(t){var n=Math.floor(6*Math.random()+1);t.textContent=n,e.push(n)}),e}},{key:"findMatches",value:function(){var e=Ceelo.rollResults.slice().sort();Ceelo.potentialPoints=e.slice();for(var t=[],n=0;n<Ceelo.rollResults.length-1;n++)e[n]==e[n+1]&&(t.push(e[n]),Ceelo.potentialPoints.splice(n,2));return t}},{key:"determineResults",value:function(){var e=Ceelo.matches[0];if(!Ceelo.matches[1]){if(e){var t=Ceelo.potentialPoints[0];return Ceelo.dice.classList.add("dice--pair"),Ceelo.dice.classList.remove("dice--win"),t}Ceelo.dice.classList.remove(["dice--pair"],["dice--win"]);var t=Math.max.apply(null,Ceelo.rollResults);return t}Ceelo.dice.classList.add("dice--win")}}]),e}(),_createClass=function(){function e(e,t){for(var n,c=0;c<t.length;c++)n=t[c],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}return function(t,n,c){return n&&e(t.prototype,n),c&&e(t,c),t}}(),SW_HELPER=function(){function e(){_classCallCheck(this,e),this.path="/sw.js",this.scope="/",this.registered=!1,this.register_button=""}return _createClass(e,[{key:"checkRegistration",value:function(){navigator.serviceWorker.getRegistration().then(function(e){e?(SWH.register_button.classList.add("sw-status__registered--true"),SWH.register_button.textContent="Registered",SWH.registered=!0):(SWH.register_button.classList.add("sw-status__registered--false"),SWH.register_button.textContent="Unregistered",SWH.registered=!1)}).catch(function(e){console.log("Check registration promise error: "+e)})}},{key:"checkControl",value:function(){navigator.serviceWorker.controller&&document.querySelector("body").classList.add("sw-controlled")}},{key:"register",value:function(){navigator.serviceWorker.register(this.path,{scope:this.scope}).then(function(){location.reload()}).catch(function(e){console.log("Registration failed with "+e)})}},{key:"unregister",value:function(){navigator.serviceWorker.register(this.path,{scope:this.scope}).then(function(e){e.unregister().then(function(){location.reload()})}).catch(function(e){console.log("Registration failed with "+e)})}}]),e}(),SWH=new SW_HELPER,Cache=new CACHE,Ceelo=new CEELO;document.addEventListener("DOMContentLoaded",function(){"serviceWorker"in navigator?(SWH.register_button=document.querySelector(".sw-status__register-button"),SWH.checkRegistration(),SWH.checkControl(),SWH.register_button.addEventListener("click",function(){SWH.registered?SWH.unregister():SWH.register()},!1),Cache.install_button=document.querySelector(".cache-status__install-button"),Cache.check(),Cache.install_button.addEventListener("click",function(){Cache.cached?Cache.delete():Cache.install()},!1)):(document.querySelector(".sw-warning").classList.add("sw-warning--triggered"),document.querySelector(".sw-status").classList.add("sw-unsupported"),document.querySelector(".cache-status").classList.add("sw-unsupported")),Ceelo.setPoint=document.querySelector(".set-point"),Ceelo.dice=document.querySelector(".dice"),Ceelo.roll=document.querySelector(".roll"),Ceelo.createDice(),Ceelo.allDice=document.getElementsByClassName("dice__die"),Ceelo.roll.addEventListener("click",function(){Ceelo.rollResults=Ceelo.rollDice(),Ceelo.matches=Ceelo.findMatches(),Ceelo.setPoint.textContent=Ceelo.determineResults()},!1)});</script> <link rel="manifest" href="/manifest.json"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1.5,minimum-scale=1"> <meta name="theme-color" content="#c90808"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta name="apple-mobile-web-app-title" content="Firebrand"> <meta name="apple-mobile-web-app-status-bar-style" content="black"> <link rel="apple-touch-icon" sizes="192x192" href="images/icons/icon192.png"> </head> <body> <noscript> <style>.wrap{opacity:0.3;}</style> <h1 class="noscript">JavaScript is required but is not enabled</h1> </noscript> <div class="sw-warning"> <h1>Service workers not supported. Some features will be disabled.</h1> </div> <div class="wrap"> <section class="sw-status message"> <h1>Service Worker Status</h1> <ul> <li><button class="sw-status__register-button button">Unregistered</button></li> </ul> </section> <section class="cache-status message"> <h1>Cache Status</h1> <ul> <li><button class="cache-status__install-button button">Uncached</button></li> </ul> </section> <section class="cee-lo message"> <h1>Cee-lo</h1> <div class="dice"></div> <br> <ul> <li><button class="roll button">Roll</button></li> </ul> <div class="set-point">SP</div> </section> </div> </body> </html> 
